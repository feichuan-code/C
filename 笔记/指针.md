# 指针（Point)━┳━　━┳━





- ==就是保存地址的变量==
  - `int i;`
  - `int* p = &i` 表示我们将 **i** 的地址交给了==指针变量p==
  - `int* p,q`表示 **p** 是一个指针，而 **q** 是什么？ q是普通的int变量
  - `int *p,q;`对于C语言来说，*p表示这个数据类型的变量是指针变量。
  - `int *p,*q`如果想表示 **多个** 指针变量，则只需在变量名前加上 ***** 即可

## 指针变量

- 变量的值是内存的地址
  - 普通变量的值是实际的值
  - **指针变量-的值-是-具有实际值的-变量的-地址**

### 作为参数的指针

- `void f(int *p)`
- 在杯调用的时候得到了某个变量的地址
  - `int i = 0;f(&i);`
- ==**在函数里可以通过指针访问函数外的i；**==
- 在函数里，函数调用的时候，发生的是参数的转移，是一种值的传递；
- 所以在函数里面，函数的参数和调用它的地方没有任何的联系。

#### 指针最常见的错误

- ==**定义了指针变量，还没有指向任何变量，就开始使用指针**==

#### 访问地址的上的变量*

- ***** 是一个单目运算符，用来访问指针所表示的地址上的变量
- 可以做右值也可以做左值
  - `int k = *p;` 
  - `*p = k+1`

![image-20211207190500357](C:\Users\fei_c\Documents\Programing Language\C\笔记\image\image-20211207190500357-16388751032451.png)

这里的 ***p = 111；** ==等价于 i = 111；==
因为 ***p** 表示的是变量 i 的地址。

### 指针的运算符 & *

- 互相反作用

  - *&yptr -> *(&yptr) -> *(yptr的地址) -> 得到那个地址上的变量 -> yptr

  - &* yptr  ->  &(*yptr)  -> &(y) ->  得到y的地址，也就是yptr -> yptr


## 指针应用场景

- 交换两个变量的值

  ```c
  void swap(int *pa, int *pb){
  	int t = *pa;
  	*pa = *pb;
  	*pb = t;
  }
  ```

  

- 函数返回多个值，某些值只能通过指针返回

  - 传入的参数实际是需要保存带回的结果的变量

- 函数返回运算状态，结果通过指针带回

- 常用的套路是让函数返回特殊的不属于有效范围内的值来表示出错：

  - -1 or 0

    ```c
    #include<stdio.h>
    //计算除法
    
    int divide(double a,double b,double *result){
    	int ret = 1;
    	if(b==0) ret = 0;
    	else *result = a/b;
    	return ret;
    }
     
    int main(){
    	double a = 7,b = 3;
    	double c;
    	if(divide(a,b,&c)){
    		printf("%0.1f/%0.1f = %0.1f",ab,c);
    	}
    	
    }
    
    
    ```

- 但是当任何数值都是有效的可能结果时，就得分开来返回了

- 后续的语言（c++,java)采用了异常机制来解决这个问题  

  ### 传入函数的数组成了什么？

  传入函数的数组实际是以 **指针** 的形式传入的

  - `sizeof(a) == sizeof(int*)`
  - 但是可以用数组运算符 [] 进行计算

  #### 数组参数

  - 以下四种函数原型是等价的
    - `int sum(int *ar,int n);`
    - `int sum(int *,int);`
    - `int sum(int ar[],int n);`
    - `int sum(int[],int)`

  ## 数组变量是特殊的指针

  - 数组变量本身表达地址，所以
    - `int a[10]; int *p = a;`//无需用 & 取地址
    - 但是数组的单元表达的是变量，需要用 & 取地址
    - `a == &a[0]`
    - [] 运算符可以对数组做，也可以对指针做：
      - `p[0] == *p;`
    - ***** 运算符可以对指针做，也可以对数组做：
      - `*a = 25;`
    - 数组变量是 **const** 的指针，所以不能被赋值
      - `int a[] <==> int * cont a = ...`

  

   